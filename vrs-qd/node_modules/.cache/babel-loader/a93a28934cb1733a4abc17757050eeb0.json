{"remainingRequest":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\utils\\menus.js","dependencies":[{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\utils\\menus.js","mtime":1587556793824},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCB7IGdldFJlcXVlc3QgfSBmcm9tICcuL2FwaSc7CmV4cG9ydCB2YXIgaW5pdE1lbnUgPSBmdW5jdGlvbiBpbml0TWVudShyb3V0ZXIsIHN0b3JlKSB7CiAgLy8gc3RvcmXnmoRzdGF0ZeacieaVsOaNruWwseS4jeivt+axggogIGlmIChzdG9yZS5zdGF0ZS5yb3V0ZXMubGVuZ3RoID4gMCkgewogICAgcmV0dXJuOwogIH0KCiAgZ2V0UmVxdWVzdCgnL3N5c3RlbS9jb25maWcvbWVudScpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIHZhciBmbXRSb3V0ZXMgPSBmb3JtYXRSb3V0ZXMoZGF0YSk7CiAgICAgIHJvdXRlci5hZGRSb3V0ZXMoZm10Um91dGVzKTsKICAgICAgc3RvcmUuY29tbWl0KCdpbml0Um91dGVzJywgZm10Um91dGVzKTsKICAgIH0KICB9KTsKfTsKZXhwb3J0IHZhciBmb3JtYXRSb3V0ZXMgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXMocm91dGVzKSB7CiAgdmFyIG1lbnVSb3V0ZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGVyKSB7CiAgICB2YXIgcGF0aCA9IHJvdXRlci5wYXRoLAogICAgICAgIF9jb21wb25lbnQgPSByb3V0ZXIuY29tcG9uZW50LAogICAgICAgIG5hbWUgPSByb3V0ZXIubmFtZSwKICAgICAgICBtZXRhID0gcm91dGVyLm1ldGEsCiAgICAgICAgaWNvbkNscyA9IHJvdXRlci5pY29uQ2xzLAogICAgICAgIGNoaWxkcmVuID0gcm91dGVyLmNoaWxkcmVuOwoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIGNoaWxkcmVuID0gZm9ybWF0Um91dGVzKGNoaWxkcmVuKTsKICAgIH0KCiAgICB2YXIgbWVudVJvdXRlciA9IHsKICAgICAgcGF0aDogcGF0aCwKICAgICAgbmFtZTogbmFtZSwKICAgICAgaWNvbkNsczogaWNvbkNscywKICAgICAgbWV0YTogbWV0YSwKICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLAogICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudChyZXNvbHZlKSB7CiAgICAgICAgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiSG9tZSIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi92aWV3cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOyAvLyDmh5LliqDovb0KCiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIkVtcCIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi92aWV3cy9lbXAvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiUGVyIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuL3ZpZXdzL3Blci8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCJTYWwiKSkgewogICAgICAgICAgcmVxdWlyZShbJy4vdmlld3Mvc2FsLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlN0YSIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi92aWV3cy9zdGEvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiU3lzIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuL3ZpZXdzL3N5cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIG1lbnVSb3V0ZXMucHVzaChtZW51Um91dGVyKTsKICB9KTsKICByZXR1cm4gbWVudVJvdXRlczsKfTs="},{"version":3,"sources":["C:/Users/31695/Desktop/vrs/vrs-qd/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","menuRoutes","forEach","path","component","name","meta","iconCls","children","Array","menuRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import { getRequest } from './api'\r\n\r\nexport const initMenu = (router, store) => {\r\n  // store的state有数据就不请求\r\n  if (store.state.routes.length > 0) {\r\n    return\r\n  }\r\n  getRequest('/system/config/menu').then(data => {\r\n    if (data) {\r\n      let fmtRoutes = formatRoutes(data)\r\n      router.addRoutes(fmtRoutes)\r\n      store.commit('initRoutes', fmtRoutes)\r\n    }\r\n  })\r\n}\r\n\r\nexport const formatRoutes = (routes) => {\r\n  let menuRoutes = [];\r\n  routes.forEach(router => {\r\n    let {\r\n      path,\r\n      component,\r\n      name,\r\n      meta,\r\n      iconCls,\r\n      children\r\n    } = router\r\n    if(children && children instanceof Array) {\r\n      children = formatRoutes(children)\r\n    }\r\n    let menuRouter = {\r\n      path: path,\r\n      name: name,\r\n      iconCls: iconCls,\r\n      meta: meta,\r\n      children: children,\r\n      component(resolve) {\r\n        if(component.startsWith(\"Home\")) {\r\n          require(['./views/' + component + '.vue'], resolve) // 懒加载\r\n        } else if(component.startsWith(\"Emp\")) {\r\n          require(['./views/emp/' + component + '.vue'], resolve)\r\n        }else if(component.startsWith(\"Per\")) {\r\n          require(['./views/per/' + component + '.vue'], resolve)\r\n        }else if(component.startsWith(\"Sal\")) {\r\n          require(['./views/sal/' + component + '.vue'], resolve)\r\n        }else if(component.startsWith(\"Sta\")) {\r\n          require(['./views/sta/' + component + '.vue'], resolve)\r\n        }else if(component.startsWith(\"Sys\")) {\r\n          require(['./views/sys/' + component + '.vue'], resolve)\r\n        }\r\n      }\r\n    }\r\n    menuRoutes.push(menuRouter)\r\n  })\r\n  return menuRoutes\r\n}\r\n"]}]}