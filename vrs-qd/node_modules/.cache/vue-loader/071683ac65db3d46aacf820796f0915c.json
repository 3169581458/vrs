{"remainingRequest":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\component\\syetem\\basic\\Joblevel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\component\\syetem\\basic\\Joblevel.vue","mtime":1588072515799},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSm9iTGV2ZWwnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgam9iTGV2ZWw6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0aXRsZWxldmVsOiAnJwogICAgICB9LAogICAgICB0aXRsZUxldmVsczogWwogICAgICAgICfmraPpq5jnuqcnLAogICAgICAgICflia/pq5jnuqcnLAogICAgICAgICfkuK3nuqcnLAogICAgICAgICfliJ3nuqcnLAogICAgICAgICflkZjnuqcnCiAgICAgIF0sCiAgICAgIGpvYkxldmVsczogW10sCiAgICAgIHVwZGF0ZUpvYkxldmVsOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdGl0bGVsZXZlbDogJycsCiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICB9LAogICAgICAvLyDlr7nor53moYbmmL7npLrkuI7lkKbnmoTmoIflv5fkvY0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOaJuemHj+WIoOmZpOeahOaVsOaNruiusOW9lQogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10KICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5pbml0Sm9iTGV2ZWxzKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOihqOagvOaVsOaNruWIneWni+WMluWkhOeQhgogICAgYXN5bmMgaW5pdEpvYkxldmVscyAoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldFJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvam9ibGV2ZWwvJykKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLmpvYkxldmVscyA9IGRhdGEub2JqCiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDmlrDorrDlvZXnmoTkuovku7blpITnkIYKICAgIGFzeW5jIGFkZEpvYkxldmVsICgpIHsKICAgICAgaWYgKHRoaXMuam9iTGV2ZWwubmFtZSAmJiB0aGlzLmpvYkxldmVsLnRpdGxlbGV2ZWwpIHsKICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy5wb3N0UmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9qb2JsZXZlbC8nLCB0aGlzLmpvYkxldmVsKQogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICB0aGlzLmluaXRKb2JMZXZlbHMoKQogICAgICAgICAgdGhpcy5qb2JMZXZlbC5uYW1lID0gJycKICAgICAgICAgIHRoaXMuam9iTGV2ZWwudGl0bGVsZXZlbCA9ICcnCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iBjOensOWQjeensOWSjOetiee6p+S4jeiDveS4uuepuicpCiAgICAgIH0KICAgIH0sCiAgICAvLyDmmL7npLrkv67mlLnlr7nor53moYYKICAgIHNob3dFZGl0RGlhbG9nIChpbmRleCwgZGF0YSkgewogICAgICAvLyB0aGlzLnVwZGF0ZUpvYkxldmVsID0gZGF0YSAvLyDmtYXmi7fotJ3kvJrmlLnlj5jooajmoLznmoTorrDlvZUKICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnVwZGF0ZUpvYkxldmVsLCBkYXRhKSAgLy8g5L2/55So5rex5ou36LSdCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyDlvLnmoYbnoa7orqTkv67mlLnnmoTkuovku7blpITnkIYKICAgIGFzeW5jIGRvVXBkYXRlICgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMucHV0UmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9qb2JsZXZlbC8nLCB0aGlzLnVwZGF0ZUpvYkxldmVsKQogICAgICBpZiAocmVzcCkgewogICAgICAgIHRoaXMuaW5pdEpvYkxldmVscygpCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgfQogICAgfSwKICAgIC8vIOihqOagvOiusOW9leeahOWIoOmZpOaMiemSrueahOS6i+S7tuWkhOeQhgogICAgaGFuZGxlRGVsZXRlIChpbmRleCwgZGF0YSkgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaQnICsgZGF0YS5uYW1lICsgJ+iBjOensCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmRlbGV0ZVJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvam9ibGV2ZWwvJyArIGRhdGEuaWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICB0aGlzLmluaXRKb2JMZXZlbHMoKQogICAgICAgIH0pCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojmk43kvZwnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiusOW9leWkmumAieeahOWkhOeQhgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlICh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKQogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsCiAgICB9LAogICAgLy8g5om56YeP5Yig6ZmkCiAgICBkZWxldGVNYW55ICgpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6ZmkJyArIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoICsgJ+adoeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAvLyDnlJ/miJDliKDpmaTorrDlvZUgaWTnmoTmn6Xor6LlrZfnrKbkuLIKICAgICAgICBsZXQgaWRzID0gJz8nCiAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgaWRzICs9ICdpZHM9JyArIGl0ZW0uaWQgKyAnJicKICAgICAgICB9KQogICAgICAgIHRoaXMuZGVsZXRlUmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9qb2JsZXZlbC8nICsgaWRzKS50aGVuKHJlc3AgPT4gewogICAgICAgICAgdGhpcy5pbml0Sm9iTGV2ZWxzKCkKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Joblevel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Joblevel.vue","sourceRoot":"src/component/syetem/basic","sourcesContent":["<template>\n  <div>\n    <div>\n      <el-input v-model=\"jobLevel.name\" placeholder=\"添加职称...\" size=\"small\" class=\"input_type\"\n                prefix-icon=\"el-icon-plus\">\n      </el-input>\n      <el-select v-model=\"jobLevel.titlelevel\" placeholder=\"请选择\" size=\"small\" class=\"select_type\">\n        <el-option v-for=\"item in titleLevels\" :key=\"item\" :label=\"item\" :value=\"item\">\n        </el-option>\n      </el-select>\n      <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" @click=\"addJobLevel\">\n        添加\n      </el-button>\n    </div>\n    <div style=\"margin-top: 8px\">\n      <el-table :data=\"jobLevels\" stripe border type=\"mini\" style=\"width: 80%\"\n                @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"id\" label=\"编号\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"职称名称\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"titlelevel\" label=\"职称级别\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"createdate\" label=\"创建时间\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"enabled\" label=\"是否启用\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.enabled\" type=\"success\">已启用</el-tag>\n            <el-tag v-else type=\"warning\">未启用</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column fixed=\"right\" label=\"操作\">\n          <template slot-scope=\"scope\">\r\n\t\t\t<el-button icon=\"el-icon-edit\" @click=\"showEditDialog(scope.$index, scope.row)\"></el-button>\r\n\t\t\t<el-button icon=\"el-icon-delete\" @click=\"handleDelete(scope.$index, scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-button type=\"danger\" size=\"small\" style=\"margin-top: 8px\" @click=\"deleteMany\"\n                 :disabled=\"multipleSelection.length === 0\">\n        批量删除\n      </el-button>\n    </div>\n    <el-dialog title=\"修改职称\" :visible.sync=\"dialogVisible\" width=\"30%\">\n      <div>\n        <div>\n          <el-input size=\"small\" v-model=\"updateJobLevel.name\"></el-input>\n        </div>\n        <div>\n          <el-select v-model=\"updateJobLevel.titlelevel\" placeholder=\"请选择\" size=\"small\" class=\"update_select\">\n            <el-option v-for=\"item in titleLevels\" :key=\"item\" :label=\"item\" :value=\"item\">\n            </el-option>\n          </el-select>\n        </div>\n        <div>\n          <el-switch v-model=\"updateJobLevel.enabled\" size=\"small\" ></el-switch>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" >取 消</el-button>\n        <el-button type=\"primary\" @click=\"doUpdate\" size=\"small\" >确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'JobLevel',\n  data () {\n    return {\n      jobLevel: {\n        name: '',\n        titlelevel: ''\n      },\n      titleLevels: [\n        '正高级',\n        '副高级',\n        '中级',\n        '初级',\n        '员级'\n      ],\n      jobLevels: [],\n      updateJobLevel: {\n        name: '',\n        titlelevel: '',\n        enabled: true\n      },\n      // 对话框显示与否的标志位\n      dialogVisible: false,\n      // 批量删除的数据记录\n      multipleSelection: []\n    }\n  },\n  mounted () {\n    this.initJobLevels()\n  },\n  methods: {\n    // 表格数据初始化处理\n    async initJobLevels () {\n      const data = await this.getRequest('/system/basic/joblevel/')\n      if (data) {\n        this.jobLevels = data.obj\n      }\n    },\n    // 添加新记录的事件处理\n    async addJobLevel () {\n      if (this.jobLevel.name && this.jobLevel.titlelevel) {\n        const resp = await this.postRequest('/system/basic/joblevel/', this.jobLevel)\n        if (resp) {\n          this.initJobLevels()\n          this.jobLevel.name = ''\n          this.jobLevel.titlelevel = ''\n        }\n      } else {\n        this.$message.error('职称名称和等级不能为空')\n      }\n    },\n    // 显示修改对话框\n    showEditDialog (index, data) {\n      // this.updateJobLevel = data // 浅拷贝会改变表格的记录\n      Object.assign(this.updateJobLevel, data)  // 使用深拷贝\n      this.dialogVisible = true\n    },\n    // 弹框确认修改的事件处理\n    async doUpdate () {\n      const resp = await this.putRequest('/system/basic/joblevel/', this.updateJobLevel)\n      if (resp) {\n        this.initJobLevels()\n        this.dialogVisible = false\n      }\n    },\n    // 表格记录的删除按钮的事件处理\n    handleDelete (index, data) {\n      this.$confirm('此操作将永久删除' + data.name + '职称, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/system/basic/joblevel/' + data.id).then(resp => {\n          this.initJobLevels()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消操作'\n        });\n      });\n    },\n    // 记录多选的处理\n    handleSelectionChange (val) {\n      console.log(val)\n      this.multipleSelection = val\n    },\n    // 批量删除\n    deleteMany () {\n      this.$confirm('此操作将永久删除' + this.multipleSelection.length + '条记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 生成删除记录 id的查询字符串\n        let ids = '?'\n        this.multipleSelection.forEach(item => {\n          ids += 'ids=' + item.id + '&'\n        })\n        this.deleteRequest('/system/basic/joblevel/' + ids).then(resp => {\n          this.initJobLevels()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消操作'\n        });\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .input_type {\n    width: 300px;\n    margin-right: 8px;\n  }\n\n  .select_type {\n    width: 200px;\n    margin-right: 8px;\n  }\n  .update_select {\n    margin: 8px 0 8px 0;\n  }\n</style>\n"]}]}