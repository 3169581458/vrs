{"remainingRequest":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\component\\syetem\\basic\\Joblevel.vue?vue&type=style&index=0&id=b9d96c82&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\src\\component\\syetem\\basic\\Joblevel.vue","mtime":1588072515799},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\31695\\Desktop\\vrs\\vrs-qd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5pbnB1dF90eXBlIHsKICB3aWR0aDogMzAwcHg7CiAgbWFyZ2luLXJpZ2h0OiA4cHg7Cn0KCi5zZWxlY3RfdHlwZSB7CiAgd2lkdGg6IDIwMHB4OwogIG1hcmdpbi1yaWdodDogOHB4Owp9Ci51cGRhdGVfc2VsZWN0IHsKICBtYXJnaW46IDhweCAwIDhweCAwOwp9Cg=="},{"version":3,"sources":["Joblevel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Joblevel.vue","sourceRoot":"src/component/syetem/basic","sourcesContent":["<template>\n  <div>\n    <div>\n      <el-input v-model=\"jobLevel.name\" placeholder=\"添加职称...\" size=\"small\" class=\"input_type\"\n                prefix-icon=\"el-icon-plus\">\n      </el-input>\n      <el-select v-model=\"jobLevel.titlelevel\" placeholder=\"请选择\" size=\"small\" class=\"select_type\">\n        <el-option v-for=\"item in titleLevels\" :key=\"item\" :label=\"item\" :value=\"item\">\n        </el-option>\n      </el-select>\n      <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" @click=\"addJobLevel\">\n        添加\n      </el-button>\n    </div>\n    <div style=\"margin-top: 8px\">\n      <el-table :data=\"jobLevels\" stripe border type=\"mini\" style=\"width: 80%\"\n                @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"id\" label=\"编号\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"职称名称\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"titlelevel\" label=\"职称级别\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"createdate\" label=\"创建时间\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"enabled\" label=\"是否启用\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.enabled\" type=\"success\">已启用</el-tag>\n            <el-tag v-else type=\"warning\">未启用</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column fixed=\"right\" label=\"操作\">\n          <template slot-scope=\"scope\">\r\n\t\t\t<el-button icon=\"el-icon-edit\" @click=\"showEditDialog(scope.$index, scope.row)\"></el-button>\r\n\t\t\t<el-button icon=\"el-icon-delete\" @click=\"handleDelete(scope.$index, scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-button type=\"danger\" size=\"small\" style=\"margin-top: 8px\" @click=\"deleteMany\"\n                 :disabled=\"multipleSelection.length === 0\">\n        批量删除\n      </el-button>\n    </div>\n    <el-dialog title=\"修改职称\" :visible.sync=\"dialogVisible\" width=\"30%\">\n      <div>\n        <div>\n          <el-input size=\"small\" v-model=\"updateJobLevel.name\"></el-input>\n        </div>\n        <div>\n          <el-select v-model=\"updateJobLevel.titlelevel\" placeholder=\"请选择\" size=\"small\" class=\"update_select\">\n            <el-option v-for=\"item in titleLevels\" :key=\"item\" :label=\"item\" :value=\"item\">\n            </el-option>\n          </el-select>\n        </div>\n        <div>\n          <el-switch v-model=\"updateJobLevel.enabled\" size=\"small\" ></el-switch>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" >取 消</el-button>\n        <el-button type=\"primary\" @click=\"doUpdate\" size=\"small\" >确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'JobLevel',\n  data () {\n    return {\n      jobLevel: {\n        name: '',\n        titlelevel: ''\n      },\n      titleLevels: [\n        '正高级',\n        '副高级',\n        '中级',\n        '初级',\n        '员级'\n      ],\n      jobLevels: [],\n      updateJobLevel: {\n        name: '',\n        titlelevel: '',\n        enabled: true\n      },\n      // 对话框显示与否的标志位\n      dialogVisible: false,\n      // 批量删除的数据记录\n      multipleSelection: []\n    }\n  },\n  mounted () {\n    this.initJobLevels()\n  },\n  methods: {\n    // 表格数据初始化处理\n    async initJobLevels () {\n      const data = await this.getRequest('/system/basic/joblevel/')\n      if (data) {\n        this.jobLevels = data.obj\n      }\n    },\n    // 添加新记录的事件处理\n    async addJobLevel () {\n      if (this.jobLevel.name && this.jobLevel.titlelevel) {\n        const resp = await this.postRequest('/system/basic/joblevel/', this.jobLevel)\n        if (resp) {\n          this.initJobLevels()\n          this.jobLevel.name = ''\n          this.jobLevel.titlelevel = ''\n        }\n      } else {\n        this.$message.error('职称名称和等级不能为空')\n      }\n    },\n    // 显示修改对话框\n    showEditDialog (index, data) {\n      // this.updateJobLevel = data // 浅拷贝会改变表格的记录\n      Object.assign(this.updateJobLevel, data)  // 使用深拷贝\n      this.dialogVisible = true\n    },\n    // 弹框确认修改的事件处理\n    async doUpdate () {\n      const resp = await this.putRequest('/system/basic/joblevel/', this.updateJobLevel)\n      if (resp) {\n        this.initJobLevels()\n        this.dialogVisible = false\n      }\n    },\n    // 表格记录的删除按钮的事件处理\n    handleDelete (index, data) {\n      this.$confirm('此操作将永久删除' + data.name + '职称, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/system/basic/joblevel/' + data.id).then(resp => {\n          this.initJobLevels()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消操作'\n        });\n      });\n    },\n    // 记录多选的处理\n    handleSelectionChange (val) {\n      console.log(val)\n      this.multipleSelection = val\n    },\n    // 批量删除\n    deleteMany () {\n      this.$confirm('此操作将永久删除' + this.multipleSelection.length + '条记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 生成删除记录 id的查询字符串\n        let ids = '?'\n        this.multipleSelection.forEach(item => {\n          ids += 'ids=' + item.id + '&'\n        })\n        this.deleteRequest('/system/basic/joblevel/' + ids).then(resp => {\n          this.initJobLevels()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消操作'\n        });\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .input_type {\n    width: 300px;\n    margin-right: 8px;\n  }\n\n  .select_type {\n    width: 200px;\n    margin-right: 8px;\n  }\n  .update_select {\n    margin: 8px 0 8px 0;\n  }\n</style>\n"]}]}